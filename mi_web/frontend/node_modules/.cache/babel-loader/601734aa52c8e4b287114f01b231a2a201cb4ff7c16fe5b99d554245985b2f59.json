{"ast":null,"code":"import{useState}from\"react\";import\"../DashboardFuncionario.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FormularioMedicamento(_ref){let{medicamento,setEditing,refresh,residentes}=_ref;const[rut_residente,setRutResidente]=useState(medicamento.rut_residente||\"\");const[nombre,setNombre]=useState(medicamento.nombre||\"\");const[dosis,setDosis]=useState(medicamento.dosis||\"\");const[caso_sos,setCasoSos]=useState(medicamento.caso_sos||false);const[medico_indicador,setMedicoIndicador]=useState(medicamento.medico_indicador||\"\");const[fecha_inicio,setFechaInicio]=useState(medicamento.fecha_inicio||\"\");const[fecha_termino,setFechaTermino]=useState(medicamento.fecha_termino||\"\");const handleSubmit=async()=>{if(!rut_residente){alert(\"Debe ingresar un RUT para asignar el medicamento\");return;}const url=medicamento.id?\"http://localhost:5000/api/medicamentos/\".concat(medicamento.id):\"http://localhost:5000/api/medicamentos\";const body={rut_residente,nombre,dosis,caso_sos,medico_indicador,fecha_inicio:fecha_inicio||null,fecha_termino:fecha_termino||null};try{const res=await fetch(url,{method:medicamento.id?\"PUT\":\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)});if(!res.ok){const text=await res.text();throw new Error(text);}refresh();setEditing(null);}catch(error){alert(\"Error al guardar el medicamento: \"+error.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-medicamento\",children:[/*#__PURE__*/_jsx(\"h3\",{children:medicamento.id?\"Editar Medicamento\":\"Nuevo Medicamento\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"RUT del Residente\",value:rut_residente,onChange:e=>setRutResidente(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Nombre\",value:nombre,onChange:e=>setNombre(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Dosis\",value:dosis,onChange:e=>setDosis(e.target.value)}),/*#__PURE__*/_jsxs(\"label\",{children:[\"CASO SOS:\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:caso_sos,onChange:e=>setCasoSos(e.target.checked)})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"M\\xE9dico indicador\",value:medico_indicador,onChange:e=>setMedicoIndicador(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fecha_inicio,onChange:e=>setFechaInicio(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fecha_termino,onChange:e=>setFechaTermino(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:medicamento.id?\"Actualizar\":\"Crear\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(null),children:\"Cancelar\"})]});}","map":{"version":3,"names":["useState","jsx","_jsx","jsxs","_jsxs","FormularioMedicamento","_ref","medicamento","setEditing","refresh","residentes","rut_residente","setRutResidente","nombre","setNombre","dosis","setDosis","caso_sos","setCasoSos","medico_indicador","setMedicoIndicador","fecha_inicio","setFechaInicio","fecha_termino","setFechaTermino","handleSubmit","alert","url","id","concat","body","res","fetch","method","headers","JSON","stringify","ok","text","Error","error","message","className","children","placeholder","value","onChange","e","target","type","checked","onClick"],"sources":["C:/Users/rodri/Desktop/prueba/mi_web/frontend/src/components/FormularioMedicamento.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport \"../DashboardFuncionario.css\";\r\n\r\nexport default function FormularioMedicamento({ medicamento, setEditing, refresh, residentes }) {\r\n  const [rut_residente, setRutResidente] = useState(medicamento.rut_residente || \"\");\r\n  const [nombre, setNombre] = useState(medicamento.nombre || \"\");\r\n  const [dosis, setDosis] = useState(medicamento.dosis || \"\");\r\n  const [caso_sos, setCasoSos] = useState(medicamento.caso_sos || false);\r\n  const [medico_indicador, setMedicoIndicador] = useState(medicamento.medico_indicador || \"\");\r\n  const [fecha_inicio, setFechaInicio] = useState(medicamento.fecha_inicio || \"\");\r\n  const [fecha_termino, setFechaTermino] = useState(medicamento.fecha_termino || \"\");\r\n\r\n  const handleSubmit = async () => {\r\n    if (!rut_residente) {\r\n      alert(\"Debe ingresar un RUT para asignar el medicamento\");\r\n      return;\r\n    }\r\n\r\n    const url = medicamento.id\r\n      ? `http://localhost:5000/api/medicamentos/${medicamento.id}`\r\n      : \"http://localhost:5000/api/medicamentos\";\r\n\r\n    const body = {\r\n      rut_residente,\r\n      nombre,\r\n      dosis,\r\n      caso_sos,\r\n      medico_indicador,\r\n      fecha_inicio: fecha_inicio || null,\r\n      fecha_termino: fecha_termino || null\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(url, {\r\n        method: medicamento.id ? \"PUT\" : \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body)\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const text = await res.text();\r\n        throw new Error(text);\r\n      }\r\n\r\n      refresh();\r\n      setEditing(null);\r\n    } catch (error) {\r\n      alert(\"Error al guardar el medicamento: \" + error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-medicamento\">\r\n      <h3>{medicamento.id ? \"Editar Medicamento\" : \"Nuevo Medicamento\"}</h3>\r\n\r\n      <input\r\n        placeholder=\"RUT del Residente\"\r\n        value={rut_residente}\r\n        onChange={e => setRutResidente(e.target.value)}\r\n      />\r\n      <input placeholder=\"Nombre\" value={nombre} onChange={e => setNombre(e.target.value)} />\r\n      <input placeholder=\"Dosis\" value={dosis} onChange={e => setDosis(e.target.value)} />\r\n      <label>\r\n        CASO SOS:\r\n        <input type=\"checkbox\" checked={caso_sos} onChange={e => setCasoSos(e.target.checked)} />\r\n      </label>\r\n      <input placeholder=\"MÃ©dico indicador\" value={medico_indicador} onChange={e => setMedicoIndicador(e.target.value)} />\r\n      <input type=\"date\" value={fecha_inicio} onChange={e => setFechaInicio(e.target.value)} />\r\n      <input type=\"date\" value={fecha_termino} onChange={e => setFechaTermino(e.target.value)} />\r\n      <button onClick={handleSubmit}>{medicamento.id ? \"Actualizar\" : \"Crear\"}</button>\r\n      <button onClick={() => setEditing(null)}>Cancelar</button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAO,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErC,cAAe,SAAS,CAAAC,qBAAqBA,CAAAC,IAAA,CAAmD,IAAlD,CAAEC,WAAW,CAAEC,UAAU,CAAEC,OAAO,CAAEC,UAAW,CAAC,CAAAJ,IAAA,CAC5F,KAAM,CAACK,aAAa,CAAEC,eAAe,CAAC,CAAGZ,QAAQ,CAACO,WAAW,CAACI,aAAa,EAAI,EAAE,CAAC,CAClF,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAACO,WAAW,CAACM,MAAM,EAAI,EAAE,CAAC,CAC9D,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAACO,WAAW,CAACQ,KAAK,EAAI,EAAE,CAAC,CAC3D,KAAM,CAACE,QAAQ,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAACO,WAAW,CAACU,QAAQ,EAAI,KAAK,CAAC,CACtE,KAAM,CAACE,gBAAgB,CAAEC,kBAAkB,CAAC,CAAGpB,QAAQ,CAACO,WAAW,CAACY,gBAAgB,EAAI,EAAE,CAAC,CAC3F,KAAM,CAACE,YAAY,CAAEC,cAAc,CAAC,CAAGtB,QAAQ,CAACO,WAAW,CAACc,YAAY,EAAI,EAAE,CAAC,CAC/E,KAAM,CAACE,aAAa,CAAEC,eAAe,CAAC,CAAGxB,QAAQ,CAACO,WAAW,CAACgB,aAAa,EAAI,EAAE,CAAC,CAElF,KAAM,CAAAE,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACd,aAAa,CAAE,CAClBe,KAAK,CAAC,kDAAkD,CAAC,CACzD,OACF,CAEA,KAAM,CAAAC,GAAG,CAAGpB,WAAW,CAACqB,EAAE,2CAAAC,MAAA,CACoBtB,WAAW,CAACqB,EAAE,EACxD,wCAAwC,CAE5C,KAAM,CAAAE,IAAI,CAAG,CACXnB,aAAa,CACbE,MAAM,CACNE,KAAK,CACLE,QAAQ,CACRE,gBAAgB,CAChBE,YAAY,CAAEA,YAAY,EAAI,IAAI,CAClCE,aAAa,CAAEA,aAAa,EAAI,IAClC,CAAC,CAED,GAAI,CACF,KAAM,CAAAQ,GAAG,CAAG,KAAM,CAAAC,KAAK,CAACL,GAAG,CAAE,CAC3BM,MAAM,CAAE1B,WAAW,CAACqB,EAAE,CAAG,KAAK,CAAG,MAAM,CACvCM,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CJ,IAAI,CAAEK,IAAI,CAACC,SAAS,CAACN,IAAI,CAC3B,CAAC,CAAC,CAEF,GAAI,CAACC,GAAG,CAACM,EAAE,CAAE,CACX,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,GAAG,CAACO,IAAI,CAAC,CAAC,CAC7B,KAAM,IAAI,CAAAC,KAAK,CAACD,IAAI,CAAC,CACvB,CAEA7B,OAAO,CAAC,CAAC,CACTD,UAAU,CAAC,IAAI,CAAC,CAClB,CAAE,MAAOgC,KAAK,CAAE,CACdd,KAAK,CAAC,mCAAmC,CAAGc,KAAK,CAACC,OAAO,CAAC,CAC5D,CACF,CAAC,CAED,mBACErC,KAAA,QAAKsC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BzC,IAAA,OAAAyC,QAAA,CAAKpC,WAAW,CAACqB,EAAE,CAAG,oBAAoB,CAAG,mBAAmB,CAAK,CAAC,cAEtE1B,IAAA,UACE0C,WAAW,CAAC,mBAAmB,CAC/BC,KAAK,CAAElC,aAAc,CACrBmC,QAAQ,CAAEC,CAAC,EAAInC,eAAe,CAACmC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChD,CAAC,cACF3C,IAAA,UAAO0C,WAAW,CAAC,QAAQ,CAACC,KAAK,CAAEhC,MAAO,CAACiC,QAAQ,CAAEC,CAAC,EAAIjC,SAAS,CAACiC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,cACvF3C,IAAA,UAAO0C,WAAW,CAAC,OAAO,CAACC,KAAK,CAAE9B,KAAM,CAAC+B,QAAQ,CAAEC,CAAC,EAAI/B,QAAQ,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,cACpFzC,KAAA,UAAAuC,QAAA,EAAO,WAEL,cAAAzC,IAAA,UAAO+C,IAAI,CAAC,UAAU,CAACC,OAAO,CAAEjC,QAAS,CAAC6B,QAAQ,CAAEC,CAAC,EAAI7B,UAAU,CAAC6B,CAAC,CAACC,MAAM,CAACE,OAAO,CAAE,CAAE,CAAC,EACpF,CAAC,cACRhD,IAAA,UAAO0C,WAAW,CAAC,qBAAkB,CAACC,KAAK,CAAE1B,gBAAiB,CAAC2B,QAAQ,CAAEC,CAAC,EAAI3B,kBAAkB,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,cACpH3C,IAAA,UAAO+C,IAAI,CAAC,MAAM,CAACJ,KAAK,CAAExB,YAAa,CAACyB,QAAQ,CAAEC,CAAC,EAAIzB,cAAc,CAACyB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,cACzF3C,IAAA,UAAO+C,IAAI,CAAC,MAAM,CAACJ,KAAK,CAAEtB,aAAc,CAACuB,QAAQ,CAAEC,CAAC,EAAIvB,eAAe,CAACuB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,cAC3F3C,IAAA,WAAQiD,OAAO,CAAE1B,YAAa,CAAAkB,QAAA,CAAEpC,WAAW,CAACqB,EAAE,CAAG,YAAY,CAAG,OAAO,CAAS,CAAC,cACjF1B,IAAA,WAAQiD,OAAO,CAAEA,CAAA,GAAM3C,UAAU,CAAC,IAAI,CAAE,CAAAmC,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACvD,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}